/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const O=require("react"),P=require("@progress/kendo-react-popup"),a=require("@progress/kendo-react-common"),W=require("@progress/kendo-svg-icons"),h=require("../messages/index.js"),_=require("@progress/kendo-react-intl");function j(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const l in e)if(l!=="default"){const u=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(r,l,u.get?u:{enumerable:!0,get:()=>e[l]})}}return r.default=e,Object.freeze(r)}const o=j(O),z=[".k-columnmenu-item-content",".k-filter-menu-container"].map(e=>a.TABBABLE_ELEMENTS.map(r=>`${e} ${r}`)),$=[[".k-tabstrip-items"],[".k-columnmenu-item"],...z],x=e=>{const[r,l]=o.useState(!1),u=o.useRef(null),i=o.useRef(null),s=o.useRef(null),m=o.useRef(0),{columnMenu:b,...M}=e,{column:k,columnMenuIcon:f}=e,w=_.useLocalization(),v=k.title||k.field,p=v?`${v} `:"",y="#",C=n=>{const t=a.getActiveElement(document);clearTimeout(m.current),m.current=window.setTimeout(()=>{t&&n.relatedTarget!==u.current&&i.current&&!i.current.contains(t)&&d()})},D=()=>{clearTimeout(m.current)},S=n=>{n.preventDefault(),r&&e.onCloseMenu&&e.onCloseMenu(),l(!r)},d=()=>{e.onCloseMenu&&e.onCloseMenu(),l(!1),!e.navigatable&&u.current&&u.current.focus()},T=n=>{var t;if(n.keyCode===a.Keys.tab){const c=n.target,E=c&&((t=c.closest(".k-grid"))==null?void 0:t.getElementsByClassName("k-grid-content")[0]);E&&E.scrollWidth>E.clientWidth&&c.scrollIntoView({inline:"center"})}},g=o.useMemo(()=>e.show!==void 0?e.show:r,[e.show,r]),I=n=>{var t;(t=s.current)==null||t.triggerKeyboardEvent(n)},R=n=>{var t;(t=s.current)==null||t.triggerMouseEvent(n)},K=(n,t,c)=>{c.preventDefault(),c.shiftKey?t.focusPrevious(n):t.focusNext(n)},q=(n,t,c)=>{n&&n.click()},B=(n,t,c)=>{c.preventDefault(),d()},N=(n,t,c)=>{c.preventDefault(),t.focusElement(n)};return o.useEffect(()=>(g&&i.current&&(s.current=new a.Navigation({tabIndex:0,root:i,selectors:$,keyboardEvents:{keydown:{Tab:K,Enter:q,Escape:B}},mouseEvents:{mousedown:N}}),s.current.focusElement(s.current.first,null)),()=>{s.current&&(s.current=null)}),[g]),o.createElement(o.Fragment,null,o.createElement("a",{className:"k-grid-header-menu k-grid-column-menu",ref:u,onClick:S,onKeyDown:T,href:y,tabIndex:e.navigatable?-1:void 0,"aria-label":`${p}${w.toLanguageString(h.columnMenu,h.messages[h.columnMenu])}`},f?o.createElement(a.IconWrap,{name:f.name,icon:f}):o.createElement(a.IconWrap,{name:"more-vertical",icon:W.moreVerticalIcon})),o.createElement(P.Popup,{anchor:u.current,show:g,popupClass:"k-column-menu k-column-menu-popup k-grid-columnmenu-popup"},o.createElement("div",{ref:i,onBlur:C,onFocus:D,onMouseDown:R,onKeyDown:I,style:{outline:"none"}},b&&o.createElement(b,{...M,onCloseMenu:d}))))};exports.GridColumnMenuWrapper=x;
