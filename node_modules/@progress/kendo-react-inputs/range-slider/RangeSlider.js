/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const W=require("react"),C=require("prop-types"),i=require("@progress/kendo-react-common"),N=require("../messages/index.js"),Y=require("@progress/kendo-react-intl"),s=require("./range-raducer.js"),F=require("../package-metadata.js");function J(r){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const c in r)if(c!=="default"){const e=Object.getOwnPropertyDescriptor(r,c);Object.defineProperty(n,c,e.get?e:{enumerable:!0,get:()=>r[c]})}}return n.default=r,Object.freeze(n)}const a=J(W),Q=(r,n,c)=>{const[e,l]=a.useState(r),m=a.useCallback(y=>{const b=s.rangeReducer(n.state||e,{...y,...n});c&&c(b,y.event),l(b)},[n,c]);return[e,m]},G=i.createPropsContext(),E=a.forwardRef((r,n)=>{i.validatePackage(F.packageMetadata);const c=i.usePropsContext(G,r),e={step:h.step,defaultValue:h.defaultValue,vertical:h.vertical,disabled:h.disabled,...c},l=a.useRef(null),m=a.useRef(null),y=a.useRef(null),b=a.useRef(null),D=a.useRef(null),$=a.useCallback(()=>{b.current&&b.current.focus()},[b]);a.useImperativeHandle(l,()=>({element:m.current,focus:$,props:e})),a.useImperativeHandle(n,()=>l.current);const f=a.useMemo(()=>e.min,[e.min]),g=a.useMemo(()=>e.max,[e.max]),S=a.useMemo(()=>e.step!==void 0?e.step:h.step,[e.step,h.step]),p=i.useDir(m,e.dir),K=(t,u)=>{e.onChange&&l.current&&e.onChange.call(void 0,{value:t,target:l.current,syntheticEvent:u})},[O,w]=a.useState(""),[R,d]=Q(e.defaultValue||h.defaultValue,{min:f,max:g,step:S,state:e.value},K),o=a.useMemo(()=>e.value||R,[e.value,R]),M=a.useRef(null),T=a.useRef(null),k=a.useMemo(()=>(o.start-f)/(g-f)*100,[o.start,f,g]),A=a.useMemo(()=>(o.end-f)/(g-f)*100,[o.end,f,g]),P=a.useMemo(()=>e.vertical?{paddingTop:0,height:"100%"}:{},[e.vertical]),z=a.useMemo(()=>e.vertical?{marginTop:"0.5rem",marginBottom:"0.5rem"}:{marginLeft:"0.5rem",marginRight:"0.5rem"},[e.vertical]),_=Y.useLocalization(),I=a.useCallback(t=>{if(!T.current)return;const u=T.current.getBoundingClientRect(),v=e.vertical?u.bottom-t.clientY:p==="rtl"?u.right-t.clientX:t.clientX-u.left,x=e.vertical?u.height:u.width,X=v/x;return f+X*(g-f)},[T,e.vertical,p,f,g,R.start,R.end,e.value&&e.value.start,e.value&&e.value.end]),V=a.useCallback(t=>t<=o.start?"start":t>=o.end?"end":2*t<o.end+o.start?"start":"end",[R.start,R.end,e.value&&e.value.start,e.value&&e.value.end]),q=a.useCallback(t=>{switch(t.keyCode){case i.Keys.right:t.preventDefault(),d({type:p==="rtl"?s.RANGE_ACTION.decrease:s.RANGE_ACTION.increase,key:"start",event:t});break;case i.Keys.up:t.preventDefault(),d({type:s.RANGE_ACTION.increase,key:"start",event:t});break;case i.Keys.left:t.preventDefault(),d({type:p==="rtl"?s.RANGE_ACTION.increase:s.RANGE_ACTION.decrease,key:"start",event:t});break;case i.Keys.down:t.preventDefault(),d({type:s.RANGE_ACTION.decrease,key:"start",event:t});break;case i.Keys.home:t.preventDefault(),d({type:s.RANGE_ACTION.min,key:"start",event:t});break;case i.Keys.end:t.preventDefault(),d({type:s.RANGE_ACTION.max,key:"start",event:t});break}},[d]),j=a.useCallback(t=>{switch(t.keyCode){case i.Keys.right:t.preventDefault(),d({type:p==="rtl"?s.RANGE_ACTION.decrease:s.RANGE_ACTION.increase,key:"end",event:t});break;case i.Keys.up:t.preventDefault(),d({type:s.RANGE_ACTION.increase,key:"end",event:t});break;case i.Keys.left:t.preventDefault(),d({type:p==="rtl"?s.RANGE_ACTION.increase:s.RANGE_ACTION.decrease,key:"end",event:t});break;case i.Keys.down:t.preventDefault(),d({type:s.RANGE_ACTION.decrease,key:"end",event:t});break;case i.Keys.home:t.preventDefault(),d({type:s.RANGE_ACTION.min,key:"end",event:t});break;case i.Keys.end:t.preventDefault(),d({type:s.RANGE_ACTION.max,key:"end",event:t});break}},[d,p]),H=a.useCallback(t=>{const u=I(t),v=V(u);w(v),v==="end"?D.current.focus():b.current.focus();const x=v==="end"?s.RANGE_ACTION.end:s.RANGE_ACTION.start;d({type:x,payload:u,event:t})},[e.vertical,f,g,d]),L=t=>{const u=I(t),v=O==="end"?s.RANGE_ACTION.end:s.RANGE_ACTION.start;d({type:v,payload:u,event:t})},B=t=>{const u=I(t),v=O==="end"?s.RANGE_ACTION.end:s.RANGE_ACTION.start;d({type:v,payload:u,event:t}),w("")};return i.useDraggable(T,{onPress:H,onDrag:L,onRelease:B}),a.createElement("div",{id:e.id,style:e.style,ref:m,dir:p,className:i.classNames("k-slider",{"k-rtl":p==="rtl","k-disabled":e.disabled,"k-slider-vertical":e.vertical,"k-slider-horizontal":!e.vertical},e.className)},a.createElement("div",{ref:T,className:"k-slider-track-wrap",style:{flexGrow:1,position:"relative",touchAction:"none",...z}},e.children&&a.createElement("ul",{className:"k-reset k-slider-items",style:{...P}},a.Children.map(e.children,(t,u)=>t&&a.cloneElement(t,{position:100*(t.props.position-e.min)/(e.max-e.min),vertical:e.vertical,firstTick:u===0,lastTick:u===a.Children.count(e.children)-1},t.props.children))),a.createElement("div",{ref:M,className:"k-slider-track",style:e.vertical?{bottom:0,height:"100%"}:{[p==="rtl"?"right":"left"]:0,width:"100%"}},k!==null&&A!==null&&a.createElement("div",{"data-selection":!0,ref:y,title:`${o.start} - ${o.end}`,className:"k-slider-selection",style:e.vertical?{height:A-k+"%",bottom:k+"%"}:{[p==="rtl"?"right":"left"]:k+"%",width:A-k+"%"}}),a.createElement("span",{ref:b,role:"slider",tabIndex:i.getTabIndex(e.startTabIndex,e.disabled,void 0),"aria-valuemin":f,"aria-valuemax":Math.max(g,o.end),"aria-valuenow":o.start,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${o.start} - ${o.end}`,className:"k-draghandle k-draghandle-start",title:_.toLanguageString(N.sliderDragTitle,N.messages[N.sliderDragTitle]),style:e.vertical?{bottom:"calc("+k+"%)",zIndex:1}:p==="rtl"?{right:"calc("+k+"% - 13px)",zIndex:1}:{left:"calc("+k+"%)",zIndex:1},onKeyDown:q}),a.createElement("span",{ref:D,role:"slider",tabIndex:i.getTabIndex(e.endTabIndex,e.disabled,void 0),"aria-valuemin":Math.min(f,o.start),"aria-valuemax":g,"aria-valuenow":o.end,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${o.start} - ${o.end}`,className:"k-draghandle k-draghandle-end",title:_.toLanguageString(N.sliderDragTitle,N.messages[N.sliderDragTitle]),style:e.vertical?{bottom:"calc("+A+"%)",zIndex:1}:p==="rtl"?{right:"calc("+A+"% - 13px)",zIndex:1}:{left:"calc("+A+"%)",zIndex:1},onKeyDown:j}))))}),U={value:(r,n,c)=>{if(r.value){const e=r.value.start,l=r.value.end,m=r.min,y=r.max;if(e>l||e>y||e<m||l>y||l<m||l<e)return new Error(`Invalid prop + ${n} supplied to ${c}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},defaultValue:(r,n,c)=>{if(r.defaultValue){const e=r.defaultValue.start,l=r.defaultValue.end,m=r.min,y=r.max;if(e>l||e>y||e<m||l>y||l<m||l<e)return new Error(`Invalid prop + ${n} supplied to ${c}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},onChange:C.func,step:C.number,min:(r,n,c)=>{const e=r[n],l=r.min,m=r.max;return l===void 0?new Error(`Invalid prop + ${n} supplied to ${c}.
                ${n} value can not be undefined.
                `):e&&l>=m?new Error(`Invalid prop + ${n} supplied to ${c}.
                ${n} value can not be equal to or bigger than the max value.
                `):null},max:(r,n,c)=>{const e=r[n],l=r.min,m=r.max;return m===void 0?new Error(`Invalid prop + ${n} supplied to ${c}.
                ${n} value can not be undefined.
                `):e&&m<=l?new Error(`Invalid prop + ${n} supplied to ${c}.
                ${n} value can not be equal to or smaller than the min value.
                `):null},vertical:C.bool,disabled:C.bool,dir:C.oneOf(["ltr","rtl"])},h={step:1,defaultValue:{start:0,end:0},vertical:!1,disabled:!1};E.displayName="KendoReactRangeSlider";E.propTypes=U;exports.RangeSlider=E;exports.RangeSliderPropsContext=G;
