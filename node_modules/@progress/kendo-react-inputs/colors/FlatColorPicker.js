/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const O=require("react"),l=require("prop-types"),g=require("@progress/kendo-react-common"),C=require("@progress/kendo-react-buttons"),E=require("@progress/kendo-svg-icons"),j=require("./ColorPalette.js"),z=require("./ColorGradient.js"),_=require("../package-metadata.js"),D=require("@progress/kendo-react-intl"),o=require("../messages/index.js");function H(e){const k=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const c=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(k,r,c.get?c:{enumerable:!0,get:()=>e[r]})}}return k.default=e,Object.freeze(k)}const t=H(O),y=t.forwardRef((e,k)=>{g.validatePackage(_.packageMetadata);const r=t.useRef(null),c=t.useRef(null),S=t.useRef(null),{defaultValue:i,showButtons:m=!0,showPreview:G=!0,showClearButton:R=!0}=e,[u,q]=t.useState((e.view||"ColorGradient")==="ColorGradient"),[n,v]=t.useState(e.value||i||void 0),[s,f]=t.useState(e.value||i||void 0),b=e.value!==void 0?e.value:void 0;t.useEffect(()=>{v(e.value)},[e.value]);const h=D.useLocalization(),P=t.useCallback(()=>{r.current&&r.current.focus()},[r]);t.useImperativeHandle(r,()=>({element:c.current,focus:P,props:e,value:b}),[b,P,e]),t.useImperativeHandle(k,()=>r.current);const w=t.useCallback(a=>{(a==="ColorGradient"&&!u||a==="ColorPalette"&&u)&&q(!u)},[u]),L=t.useCallback(a=>{if(i?(v(i),f(i)):(v(void 0),f(void 0)),e.onPreviewChange){const d={value:i||void 0,nativeEvent:a.nativeEvent,syntheticEvent:a};e.onPreviewChange.call(void 0,d)}},[i,e.onPreviewChange]),B=t.useCallback(a=>{if(v(a.value),e.onPreviewChange){const d={value:a.value,nativeEvent:a.nativeEvent,syntheticEvent:a.syntheticEvent};e.onPreviewChange.call(void 0,d)}},[e.onPreviewChange]),x=t.useCallback(a=>{if(n!==void 0&&f(n),e.onChange){const d={value:n,nativeEvent:a.nativeEvent,syntheticEvent:a};e.onChange.call(void 0,d)}},[n,e.onChange]),F=t.useCallback(()=>{v(s)},[s]),M=t.useCallback(a=>{if(v(s),e.onPreviewChange){const d={value:s,nativeEvent:a.nativeEvent,syntheticEvent:a};e.onPreviewChange.call(void 0,d)}},[s,e.onPreviewChange]),N=t.useCallback(a=>{c.current&&!(a.nativeEvent.target instanceof HTMLInputElement)&&c.current.focus()},[c]),T=t.useCallback(a=>{var I;if((!a.relatedTarget||!((I=c.current)!=null&&I.contains(a.relatedTarget)))&&(!m&&n!==void 0&&f(n),!m&&e.onChange)){const V={value:n,nativeEvent:a.nativeEvent,syntheticEvent:a};e.onChange.call(void 0,V)}},[n,m,e.onChange]);return t.createElement("div",{id:e.id,role:"textbox","aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-disabled":e.disabled?"true":void 0,style:e.style,ref:c,tabIndex:g.getTabIndex(e.tabIndex,e.disabled),className:g.classNames("k-flatcolorpicker k-coloreditor",{"k-disabled":e.disabled},e.className),onBlur:T},t.createElement(t.Fragment,null,e.header||t.createElement("div",{className:"k-coloreditor-header k-hstack"},t.createElement("div",{className:"k-coloreditor-header-actions k-hstack"},t.createElement(C.ButtonGroup,{className:"k-button-group-flat"},t.createElement(C.Button,{type:"button","aria-label":h.toLanguageString(o.flatColorPickerColorGradientBtn,o.messages[o.flatColorPickerColorGradientBtn]),togglable:!0,fillMode:"flat",selected:u,onClick:()=>w("ColorGradient"),icon:"droplet-slider",svgIcon:E.dropletSliderIcon}),t.createElement(C.Button,{type:"button","aria-label":h.toLanguageString(o.flatColorPickerColorPaletteBtn,o.messages[o.flatColorPickerColorPaletteBtn]),togglable:!0,fillMode:"flat",selected:!u,onClick:()=>w("ColorPalette"),icon:"palette",svgIcon:E.paletteIcon}))),t.createElement("div",{className:"k-spacer"}),t.createElement("div",{className:"k-coloreditor-header-actions k-hstack"},R&&t.createElement(C.Button,{type:"button",fillMode:"flat",onClick:L,"aria-label":h.toLanguageString(o.flatColorPickerClearBtn,o.messages[o.flatColorPickerClearBtn]),icon:"droplet-slash",svgIcon:E.dropletSlashIcon}),G&&t.createElement("div",{className:"k-coloreditor-preview k-vstack"},t.createElement("span",{className:g.classNames("k-coloreditor-preview-color","k-color-preview",{"k-no-color":b===void 0})},t.createElement("span",{className:"k-color-preview-mask",style:{background:n||void 0}})),t.createElement("span",{className:g.classNames("k-coloreditor-current-color","k-color-preview",{"k-no-color":s===void 0}),onClick:M},t.createElement("span",{className:"k-color-preview-mask",style:{background:s||void 0}}))))),t.createElement("div",{className:"k-coloreditor-views k-vstack"},u?t.createElement(z.ColorGradient,{ref:S,role:"none",tabIndex:-1,ariaLabel:void 0,value:n,onChange:B,onFocus:N,opacity:e.opacity,format:e.format}):t.createElement(j.ColorPalette,{ariaDisabled:!0,ariaLabelledBy:"required_label",value:n,onChange:B,onFocus:N})),m&&t.createElement("div",{className:"k-coloreditor-footer k-actions k-actions-end k-actions-horizontal"},t.createElement(C.Button,{type:"button",className:"k-coloreditor-cancel",onClick:F},o.messages[o.flatColorPickerCancelBtn]),t.createElement(C.Button,{type:"button",themeColor:"primary",className:"k-coloreditor-apply",onClick:x},o.messages[o.flatColorPickerApplyBtn]))))}),A={id:l.string,style:l.any,className:l.string,value:l.string,defaultValue:l.string,onPreviewChange:l.func,onChange:l.func,opacity:l.bool,format:l.any,tabIndex:l.number,ariaLabel:l.string,ariaLabelledBy:l.string,disabled:l.bool,view:l.any,header:l.any,showClearButton:l.bool,showPreview:l.bool,showButtons:l.bool};y.displayName="KendoFlatColorPicker";y.propTypes=A;exports.FlatColorPicker=y;
