/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const ce=require("react"),se=require("@progress/kendo-react-popup"),ue=require("@progress/kendo-react-intl"),ae=require("@progress/kendo-data-query"),y=require("./ColumnMenuItem.js"),F=require("./ColumnMenuFilters.js"),T=require("./ColumnMenuFilterLogic.js"),me=require("./ColumnMenuFilterForm.js"),g=require("../messages/index.js"),H=require("@progress/kendo-react-common"),fe=require("../package-metadata.js"),h=require("@progress/kendo-svg-icons");function de(n){const m=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(n){for(const t in n)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(m,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return m.default=n,Object.freeze(m)}const e=de(ce),S=n=>{H.validatePackage(fe.packageMetadata);const m=e.useRef([]),{field:t,filter:r,sort:l=m.current,onSortChange:f,onFilterChange:i,initialFilter:k,sortAsc:B=!1,sortDesc:A=!1,filterContent:L=[],expandFilters:D=!1}=n,[d,O]=e.useState(!1),[E,N]=e.useState(D),[c,v]=e.useState(t&&k?k(t):null),I=e.useRef(null),q=e.useRef(null),x=e.useRef(null),w=e.useRef(!1),p=e.useCallback(()=>(r||[]).find(o=>o.filters.every(s=>!ae.isCompositeFilterDescriptor(s)&&s.field===t)),[r,t]),C=e.useCallback(()=>{O(!1)},[]),J=e.useCallback(()=>{if(w.current){w.current=!1;return}clearTimeout(x.current),x.current=window.setTimeout(()=>{C()})},[C]),K=e.useCallback(()=>clearTimeout(x.current),[]),U=e.useCallback(o=>{w.current=d&&o.currentTarget===I.current},[d]),V=e.useCallback(()=>{O(!d),t&&k&&(N(d?!1:D),v(d?c:p()||k(t)))},[p,t,d,c,k,D]);e.useEffect(()=>{d&&q.current&&q.current.focus()},[d]);const X=e.useCallback(()=>N(!E),[E]),b=e.useCallback((o,s)=>{const u=[...l],a=u.findIndex(ie=>ie.field===t),M={field:t,dir:s};a>=0?u[a].dir!==M.dir?u.splice(a,1,M):u.splice(a,1):u.push(M),C(),f&&f.call(void 0,o,u,t)},[l,t,f,C]),P=e.useCallback((o,s,u)=>{const a={...c,filters:[...c.filters]},M=a.filters.indexOf(u);a.filters.splice(M,1,s),v(a)},[c]),Y=e.useCallback(o=>{o.preventDefault();const s=(r||[]).slice(),u=p(),a=u?s.indexOf(u):-1;a>=0?s.splice(a,1,c):s.push(c),C(),i&&i.call(void 0,o,s,t)},[r,c,t,i,C,p]),Z=e.useCallback(o=>{const s=(r||[]).slice(),u=p(),a=u?s.indexOf(u):-1;a>=0&&s.splice(a,1),k&&v(k(t)),C(),i&&i.call(void 0,o,s,t)},[r,t,i,k,C,p]),$=e.useCallback(o=>b(o,"asc"),[b]),ee=e.useCallback(o=>b(o,"desc"),[b]),te=e.useCallback(o=>c&&v({...c,logic:o.value.logic}),[c]),j=l.find(o=>o.field===t)||{dir:""},[_,z,W]=L,R=ue.useLocalization(),ne=B||A?e.createElement("div",{className:"k-columnmenu-item-wrapper",key:"sorting"},B&&e.createElement(y.ColumnMenuItem,{title:R.toLanguageString(g.columnMenuSortAscending,g.messages[g.columnMenuSortAscending]),iconClass:"k-i-sort-asc-small",svgIcon:h.sortAscSmallIcon,selected:j.dir==="asc",onClick:$}),A&&e.createElement(y.ColumnMenuItem,{title:R.toLanguageString(g.columnMenuSortDescending,g.messages[g.columnMenuSortDescending]),iconClass:"k-i-sort-desc-small",svgIcon:h.sortDescSmallIcon,selected:j.dir==="desc",onClick:ee})):null,le=c&&L.length>0?e.createElement("div",{className:"k-columnmenu-item-wrapper",key:"filtering"},e.createElement(y.ColumnMenuItem,{iconClass:"k-i-filter",svgIcon:h.filterIcon,title:R.toLanguageString(g.columnMenuFilterTitle,g.messages[g.columnMenuFilterTitle]),onClick:X}),e.createElement(me.ColumnMenuFilterForm,{show:E,onSubmit:Y,onReset:Z},_&&e.createElement(_,{filter:c.filters[0],onFilterChange:P}),z&&e.createElement(z,{value:c.logic,onChange:te}),W&&e.createElement(W,{filter:c.filters[1],onFilterChange:P}))):null,Q=[ne,le],oe=e.createElement("span",{ref:I,onClick:V,onMouseDown:U,className:"k-grid-header-menu k-grid-column-menu"+(p()?" k-active":""),key:"button"},e.createElement(H.IconWrap,{name:"filter",icon:h.filterIcon})),re=e.createElement(se.Popup,{anchor:I.current,show:d,key:"popup",popupClass:"k-column-menu k-column-menu-popup"},e.createElement("div",{ref:q,tabIndex:0,onBlur:J,onFocus:K,style:{outline:"none"}},n.itemsRender?n.itemsRender.call(void 0,Q,{closeMenu:C,field:t}):Q)),G=[oe,re];return e.createElement(e.Fragment,null,n.render?n.render.call(void 0,G):G)},Ce=n=>{const{field:m,...t}=n,r=e.useCallback(i=>({logic:"and",filters:[{operator:"contains",field:i,value:""},{operator:"contains",field:i,value:""}]}),[]),l=!!n.field,f=l?[F.ColumnMenuTextFilter,T.ColumnMenuFilterLogic,F.ColumnMenuTextFilter]:[];return e.createElement(S,{sortAsc:l,sortDesc:l,filterContent:f,initialFilter:l?r:void 0,field:m,...t})},ge=n=>{const{field:m,...t}=n,r=e.useCallback(i=>({logic:"or",filters:[{operator:"eq",field:i,value:null},{operator:"eq",field:i,value:null}]}),[]),l=!!n.field,f=l?[F.ColumnMenuNumericFilter,T.ColumnMenuFilterLogic,F.ColumnMenuNumericFilter]:[];return e.createElement(S,{sortAsc:l,sortDesc:l,filterContent:f,initialFilter:l?r:void 0,field:m,...t})},ke=n=>{const{field:m,...t}=n,r=e.useCallback(i=>({logic:"or",filters:[{operator:"eq",field:i,value:null},{operator:"eq",field:i,value:null}]}),[]),l=!!n.field,f=l?[F.ColumnMenuDateFilter,T.ColumnMenuFilterLogic,F.ColumnMenuDateFilter]:[];return e.createElement(S,{sortAsc:l,sortDesc:l,filterContent:f,initialFilter:l?r:void 0,field:m,...t})},pe=n=>{const{field:m,...t}=n,r=e.useCallback(i=>({logic:"and",filters:[{operator:"eq",field:i,value:!1}]}),[]),l=!!n.field,f=l?[F.ColumnMenuBooleanFilter]:[];return e.createElement(S,{sortAsc:l,sortDesc:l,filterContent:f,initialFilter:l?r:void 0,field:m,...t})};exports.ColumnMenuBooleanColumn=pe;exports.ColumnMenuDateColumn=ke;exports.ColumnMenuNumericColumn=ge;exports.ColumnMenuTextColumn=Ce;
