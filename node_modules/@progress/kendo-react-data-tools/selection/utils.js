/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("@progress/kendo-react-common"),v=require("./constants.js"),M="items",y={},F=(e,t)=>!e||Array.isArray(e)&&e.length===0?[t]:e.findIndex(d=>d===t)>-1?e.filter(d=>d!==t):[...e,t],b=e=>{let t=e;for(;t;){if(t.hasAttribute(v.TABLE_PREVENT_SELECTION_ELEMENT))return!0;t=t.parentElement}return!1},R=(e,t)=>{let o=e;for(;o;){if(o.tagName===t)return o;if(o.tagName==="TABLE")return null;o=o.parentElement}return null},_=e=>{if(!e)return;const t=e.getAttribute(v.TABLE_ROW_INDEX_ATTRIBUTE);return t?parseInt(t,10):void 0},N=e=>{if(!e)return;const t=e.getAttribute(v.TABLE_COL_INDEX_ATTRIBUTE);return t?parseInt(t,10):void 0},G=e=>{const t=e.subItemsField||M,o=s.getter(e.dataItemKey);return s.mapTree(e.data,t,d=>s.extendDataItem(d,t,{[e.selectedField]:e.selectedState[o(d)]}))},U=e=>{const{event:t,dataItemKey:o,selectedState:d}=e,{syntheticEvent:c,nativeEvent:n,dataItems:f,componentId:i,mode:E,cell:x,selectedField:T}=t,{target:S,ctrlKey:w,metaKey:p,altKey:I,shiftKey:K}=n;if(c.isDefaultPrevented()&&!K||n.keyCode!==s.Keys.space&&n.keyCode!==s.Keys.enter&&n.keyCode!==s.Keys.right&&n.keyCode!==s.Keys.left&&n.keyCode!==s.Keys.up&&n.keyCode!==s.Keys.down)return d;c.preventDefault();const D=R(S,"TD"),m=R(S,"TR");let r=N(D),u=_(m),l={};return D&&m&&u!==void 0&&r!==void 0&&(n.keyCode===s.Keys.right&&r++,n.keyCode===s.Keys.left&&r--,n.keyCode===s.Keys.down&&u++,n.keyCode===s.Keys.up&&u--,l=L({selectedState:d,dataItemKey:o,event:{ctrlKey:w,metaKey:p,altKey:I,shiftKey:K,dataItems:f,cell:x,mode:E,selectedField:T,componentId:i,startColIndex:r,endColIndex:r,startRowIndex:u,endRowIndex:u,isDrag:!1,syntheticEvent:c,nativeEvent:n,target:t.target,dataItem:null}})),l},L=e=>{const{event:t,dataItemKey:o,selectedState:d}=e,{dataItems:c,startRowIndex:n,endRowIndex:f,startColIndex:i,endColIndex:E,cell:x,isDrag:T,ctrlKey:S,shiftKey:w,metaKey:p,componentId:I,mode:K,dataItem:D}=t,m=s.getter(o);let r={};const u=D!==null;if(K==="single"){const l=c.slice(n,n+1)[0],g=m(l);y[I]={rowIndex:n,colIndex:i},r[g]=x?[i]:!0}else if(T||!w&&!S&&!p&&!u){T||(y[I]={rowIndex:n,colIndex:i});const l=[];for(let a=i;a<=E;a++)l.push(a);c.slice(n,f+1).forEach(a=>{const h=m(a);r[h]=x?[...l]:!0})}else if(S||p||u){y[I]={rowIndex:n,colIndex:i};const g=c.slice(n,f+1)[0],a=m(g);r={...d},r[a]=x&&!u?F(r[a],i):!r[a]}else if(w){const l=y[I]&&y[I].rowIndex||0,g=y[I]&&y[I].colIndex||0,a=Math.min(l,n,f),h=Math.max(l,n,f),O=Math.min(g,i,E),k=Math.max(g,i,E),A=[];for(let C=O;C<=k;C++)A.push(C);c.slice(a,h+1).forEach(C=>{const B=m(C);r[B]=x?[...A]:!0})}return r},X=s.hasRelativeStackingContext(),q=e=>{if(!e||!X)return null;let t=e.parentElement;for(;t;){if(window.getComputedStyle(t).transform!=="none")return t;t=t.parentElement}},V=e=>{if(e&&e.ownerDocument&&e!==e.ownerDocument.body){const t=e.getBoundingClientRect();return{left:t.left-e.scrollLeft,top:t.top-e.scrollTop}}return{left:0,top:0}},j=e=>{const t=e?typeof e.enabled=="boolean"?e.enabled:!0:!1,o=e?!!e.drag:!1,d=e&&e.mode?e.mode:"multiple",c=!!(e&&e.cell);return{enabled:t,drag:o,mode:d,cell:c}};exports.closestTagName=R;exports.getColumnIndex=N;exports.getOffset=V;exports.getRowIndex=_;exports.getSelectedState=L;exports.getSelectedStateFromKeyDown=U;exports.getSelectionOptions=j;exports.isInNonSelectable=b;exports.relativeContextElement=q;exports.setSelectedState=G;
