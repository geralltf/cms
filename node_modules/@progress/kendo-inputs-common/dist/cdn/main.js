!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@progress/kendo-drawing")):"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.KendoInputsCommon=e(require("@progress/kendo-drawing")):t.KendoInputsCommon=e(t.KendoDrawing)}(self,(function(t){return(()=>{"use strict";var e={909:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.limitValue=e.elementOffset=void 0;var n=o(86).drawing.util,r=n.elementOffset,i=n.limitValue;e.elementOffset=r,e.limitValue=i},847:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.limitValue=e.elementOffset=void 0;var n=o(909);Object.defineProperty(e,"elementOffset",{enumerable:!0,get:function(){return n.elementOffset}}),Object.defineProperty(e,"limitValue",{enumerable:!0,get:function(){return n.limitValue}})},215:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MaskingService=void 0;var n=o(223),r=o(566),i=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,o=void 0===e?"":e,n=t.prompt,r=void 0===n?"":n,i=t.promptPlaceholder,s=void 0===i?" ":i,a=t.rules,u=void 0===a?{}:a,p=t.includeLiterals,l=void 0!==p&&p;this.mask=o,this.prompt=r,this.promptPlaceholder=s,this.rules=u,this.includeLiterals=l,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return n.sequence(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(n.sequence(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(n.sequence(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,o){return t.length<e.length?this.maskRemoved(t,e,o):this.maskInserted(t,e,o)},t.prototype.maskInRange=function(t,e,o,r){var i="",s=r,a=e.split("").slice(0,o),u=e.split("").slice(r);return n.sequence(this.maskTokens.slice(o,r)).run(t).fold((function(t){i=a.concat(t).concat(u).join("")})),{selection:s,value:i}},t.prototype.maskRemoved=function(t,e,o){var r=this,i="",s=o,a=t.split("").slice(o),u=t.split("").slice(0,o).join(""),p=this.maskTokens.length-(t.length-o);return n.sequence(this.maskTokens.slice(0,p)).run(u,e).fold((function(t){s=r.adjustPosition(t,s),i=t.concat(a).join("")})),{selection:s,value:i}},t.prototype.adjustPosition=function(t,e){var o=t[e];return this.maskTokens[e].isLiteral(o)||o===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,o){var r=this,i="",s=o,a=t.slice(0,o);return n.sequence(this.unmaskTokens).run(a,e).chain((function(t){s=t.join("").length;var o=e.slice(s);return n.sequence(r.maskTokens).run(t.join("")+o,e)})).fold((function(t){i=t.join("")})),{selection:s,value:i}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return r.literal(t)},mask:function(o){return r.mask({prompt:t,promptPlaceholder:e})(o)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return r.unliteral(t)},mask:function(e){return r.unmask(t.prompt)(e)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,o=t.promptPlaceholder,n=t.includeLiterals;return{literal:function(t){return r.rawLiteral(n)},mask:function(t){return r.rawMask({prompt:e,promptPlaceholder:o})}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return r.rawLiteral(!1)},mask:function(e){return r.rawMask({prompt:t,promptPlaceholder:""})}}},enumerable:!1,configurable:!0}),t.prototype.tokenize=function(){var t=this;n.greedy(r.token(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,o){t.maskTokens=e})),n.greedy(r.token(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,o){t.unmaskTokens=e})),n.greedy(r.token(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,o){t.rawTokens=e})),n.greedy(r.token(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,o){t.validationTokens=e}))},t}();e.MaskingService=i},223:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.greedy=e.sequence=void 0;var n=o(566),r=o(262);e.sequence=function(t){return t.reduce((function(t,e){return o=e,t.chain((function(t){return o.map((function(e){return t.concat([e])}))}));var o}),(e=[],new n.Parser((function(t){return new r.Result(e,t)}))));var e},e.greedy=function(t){return new n.Parser((function(e){for(var o=new r.Result([],e);!e.eof();)o=o.concat(t.run(e));return o}))}},566:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawLiteral=e.rawMask=e.token=e.unliteral=e.unmask=e.literal=e.mask=e.Parser=void 0;var n=o(262),r=o(771),i=function(t){return(t||"").split("")},s=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof r.Stream?this.parse(t):this.parse(new r.Stream(i(t),i(e)))},t.prototype.map=function(e){var o=this;return new t((function(t){return o.parse(t).map(e)}))},t.prototype.chain=function(e){var o=this;return new t((function(t){return o.parse(t).chain((function(t,o){return e(t).run(o)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===n.ResultType.Literal},t}();e.Parser=s,e.mask=function(t){var e=t.prompt,o=t.promptPlaceholder;return function(t){return new s((function(r){for(;!r.eof();){var i=r.peek(),s=i.char,a=i.control;if(s===a&&a===e)return r.eat(),new n.Result(e,r,n.ResultType.Mask);if(t.test(s))return r.eat(),new n.Result(s,r,n.ResultType.Mask);if(s===o)return r.eat(),new n.Result(e,r,n.ResultType.Mask);r.eat_input()}return r.eat(),new n.Result(e,r,n.ResultType.Mask)}))}},e.literal=function(t){return new s((function(e){return e.peek().char===t?(e.eat(),new n.Result(t,e,n.ResultType.Literal)):new n.Result(t,e,n.ResultType.Literal)}))},e.unmask=function(t){return function(e){return new s((function(o){for(;!o.eof();){var r=o.peek(),i=r.char,s=r.control;if(i===t&&s===t)return o.eat(),new n.Result(i,o);if(e.test(i))return o.eat(),new n.Result(i,o);o.eat_input()}return o.eat(),new n.Result("",o)}))}},e.unliteral=function(t){return new s((function(e){return e.eof()?new n.Result("",e):(e.peek().char===t&&e.eat(),new n.Result(t,e))}))},e.token=function(t,e){return new s((function(o){var r=o.next().char,i=t[r];return"\\"===r?(r=o.next().char,new n.Result(e.literal(r),o)):i?new n.Result(e.mask(i),o):new n.Result(e.literal(r),o)}))},e.rawMask=function(t){var e=t.prompt,o=t.promptPlaceholder;return new s((function(t){var r=t.next().char;return r===e?new n.Result(o,t):new n.Result(r,t)}))},e.rawLiteral=function(t){return new s((function(e){var o=e.next().char;return t?new n.Result(o,e):new n.Result("",e)}))}},262:(t,e)=>{var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Result=e.ResultType=void 0,function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(o=e.ResultType||(e.ResultType={}));var n=function(){function t(t,e,n){void 0===n&&(n=o.Undefined),this.value=t,this.rest=e,this.type=n}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,o){return t.chain((function(t,o){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}();e.Result=n},771:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stream=void 0;var o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}();e.Stream=o},887:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SignaturePad=void 0;var n=o(86),r=o(847),i=n.geometry.Point,s=n.geometry.Rect,a=n.geometry.transform,u=function(){},p="#000",l="#fff",h=function(){function t(t,e){void 0===e&&(e={}),this.element=t,this.lastMoveTime=0,this.resolveColors(e),this.options=Object.assign({scale:1,precision:1,samplingRate:200,smooth:!1!==e.smooth,color:p,backgroundColor:l,strokeWidth:1,onChange:u,onDraw:u,onDrawEnd:u},e,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions={stroke:{color:this.options.color,width:this.options.strokeWidth,lineCap:"round",lineJoin:"round"}},this.initSurface(),this.attachEvents()}return t.prototype.destroy=function(){this.detachEvents()},t.prototype.clear=function(){this.rootGroup.clear(),this.path=null},t.prototype.readThemeColors=function(){var t,e;if("undefined"!=typeof document){var o=this.element.closest(".k-signature")||this.element,n=o.ownerDocument.defaultView.getComputedStyle(o);t=n.color,e=n.backgroundColor}this.themeColor=t||this.themeColor||p,this.themeBackgroundColor=e||this.themeBackgroundColor||l},t.prototype.resolveColors=function(t){this.readThemeColors(),this.color=t.color||(this.options||{}).color||this.themeColor,this.backgroundColor=t.backgroundColor||(this.options||{}).backgroundColor||this.themeBackgroundColor},Object.defineProperty(t.prototype,"isDrawing",{get:function(){return Boolean(this.points)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathData",{get:function(){var t;return null===(t=this.path)||void 0===t?void 0:t.toString(3)},set:function(t){this.clear(),this.path=n.MultiPath.parse(t,this.pathOptions),this.rootGroup.append(this.path)},enumerable:!1,configurable:!0}),t.prototype.loadImage=function(t,e){if(void 0===e&&(e=[]),t){var o=this.size,r=o[0],i=o[1],s=r/this.options.scale,u=i/this.options.scale,p=e[0]||6*s,l=e[1]||6*u,h=s/p,c=u/l,f=Math.min(h,c),d=new n.Image(t,new n.geometry.Rect([0,0],[p,l]));d.transform(a().scale(f,f)),this.clear(),this.rootGroup.append(d)}else this.clear()},t.prototype.exportImage=function(t){var e,o=this.size,r=o[0],i=o[1],u=r/this.options.scale,p=i/this.options.scale,l=(null==t?void 0:t.width)||6*u,h=(null==t?void 0:t.height)||6*p,c=l/u,f=h/p,d=Math.min(c,f),m=new s([0,0],[l,h]),v=new n.Group({clip:n.Path.fromRect(m)}),k=new n.Group({transform:a().scale(d,d)}),y=n.Path.fromRect(m,{fill:{color:this.options.backgroundColor}});return v.append(y),v.append(k),(e=k.children).push.apply(e,this.rootGroup.children),n.exportImage(v,Object.assign({width:l,height:h},t))},t.prototype.resize=function(){this.surface.resize(!0)},t.prototype.setOptions=function(t){this.resolveColors(t),Object.assign(this.options,t,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions.stroke.color=this.options.color,this.pathOptions.stroke.width=this.options.strokeWidth,this.path&&(this.path.options.set("stroke.color",this.options.color),this.path.options.set("stroke.width",this.options.strokeWidth)),this.background.options.set("fill.color",this.options.backgroundColor)},t.prototype.initSurface=function(){this.surface=n.Surface.create(this.element,{type:"canvas"}),this.element.style.touchAction="none";var t=this.options.scale;this.rootGroup=new n.Group({transform:a().scale(t,t)});var e=this.element.offsetWidth||750,o=this.element.offsetHeight||250;this.size=[e,o],this.background=n.Path.fromRect(new s([0,0],this.size),{fill:{color:this.options.backgroundColor}}),this.surface.draw(this.background),this.surface.draw(this.rootGroup)},t.prototype.attachEvents=function(){this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onDragStart=this.onDragStart.bind(this),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("dragstart",this.onDragStart)},t.prototype.detachEvents=function(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.detachPointerMove(),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("dragstart",this.onDragStart)},t.prototype.attachPointerMove=function(){this.element.addEventListener("pointermove",this.onPointerMove)},t.prototype.detachPointerMove=function(){this.element.removeEventListener("pointermove",this.onPointerMove)},t.prototype.touchPoint=function(t){var e=r.elementOffset(this.element),o=t.pageX,n=t.pageY,s=1/this.options.scale;return new i(o-e.left,n-e.top).scale(s,s)},t.prototype.onDragStart=function(t){t.preventDefault()},t.prototype.onPointerDown=function(t){if(!this.options.readonly&&t.isPrimary&&function(t){return"number"!=typeof t.button||0===t.button}(t)){this.detachPointerMove(),this.attachPointerMove(),this.path||(this.path=new n.MultiPath(this.pathOptions),this.rootGroup.append(this.path)),this.options.onDraw(),this.element.setPointerCapture(t.pointerId);var e=this.touchPoint(t);this.points=[e],this.path.moveTo(e)}},t.prototype.onPointerMove=function(t){if(this.points&&this.path&&t.isPrimary){var e=(new Date).getTime();if(!(e-this.lastMoveTime<1e3/r.limitValue(this.options.samplingRate,1,1e4))){this.lastMoveTime=e;var o=this.touchPoint(t),n=this.points[this.points.length-1],i=1/r.limitValue(this.options.precision,.01,100);o.distanceTo(n)<i||(this.points.push(o),this.path.lineTo(o))}}},t.prototype.onPointerUp=function(t){if(t.isPrimary&&this.path&&this.points&&!this.options.readonly){if(this.detachPointerMove(),this.options.smooth){var e=n.Path.curveFromPoints(this.points);this.path.paths.splice(this.path.paths.length-1,1,e)}this.points=null,this.options.onDrawEnd(),this.options.onChange(this.pathData)}},t}();e.SignaturePad=h},86:e=>{e.exports=t}},o={};function n(t){var r=o[t];if(void 0!==r)return r.exports;var i=o[t]={exports:{}};return e[t](i,i.exports,n),i.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.SignaturePad=t.MaskingService=void 0;var e=n(215);Object.defineProperty(t,"MaskingService",{enumerable:!0,get:function(){return e.MaskingService}});var o=n(887);Object.defineProperty(t,"SignaturePad",{enumerable:!0,get:function(){return o.SignaturePad}})})(),r})()}));